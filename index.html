<!DOCTYPE html>
<html lang="id" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Katalog Undangan Digital - Malik Faza Studio</title>
    <meta name="description" content="Koleksi undangan digital premium untuk Pernikahan, Khitanan, dan Aqiqah.">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Plus+Jakarta+Sans:wght@300;400;600&family=Playfair+Display:ital,wght@0,400;1,400&display=swap" rel="stylesheet">
    
    <!-- FontAwesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- AOS Animation -->
    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">

    <!-- SweetAlert2 (Untuk Alert Bagus) -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        midnight: '#020617', 
                        darkblue: '#0f172a',
                        cyan: { 400: '#22d3ee', 500: '#06b6d4', 600: '#0891b2' },
                        sky: { 400: '#38bdf8', 500: '#0ea5e9' }
                    },
                    fontFamily: {
                        heading: ['"Cinzel"', 'serif'],
                        body: ['"Plus Jakarta Sans"', 'sans-serif'],
                        serif: ['"Playfair Display"', 'serif'],
                    },
                    animation: {
                        'float': 'float 6s ease-in-out infinite',
                        'pulse-glow': 'pulse-glow 3s infinite',
                        'twinkle': 'twinkle 4s ease-in-out infinite',
                        'spin-slow': 'spin 12s linear infinite',
                        'spin-music': 'spin 4s linear infinite', // Animasi putar musik
                    },
                    keyframes: {
                        float: { '0%, 100%': { transform: 'translateY(0)' }, '50%': { transform: 'translateY(-10px)' } },
                        'pulse-glow': { '0%, 100%': { opacity: 1, filter: 'brightness(100%)' }, '50%': { opacity: 0.8, filter: 'brightness(130%)' } },
                        twinkle: { '0%, 100%': { opacity: 0.3, transform: 'scale(0.8)' }, '50%': { opacity: 1, transform: 'scale(1.2)' } }
                    }
                }
            }
        }
    </script>

    <style>
        body { background-color: #020617; color: #e2e8f0; font-family: 'Plus Jakarta Sans', sans-serif; margin: 0; overflow: hidden; }
        #canvas-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; background: radial-gradient(circle at center, #0f172a 0%, #020617 80%); }
        #cover-screen { background: radial-gradient(ellipse at bottom, #1e293b 0%, #020617 100%); transition: transform 1.2s cubic-bezier(0.77, 0, 0.175, 1), opacity 1.2s ease-out; }
        #cover-screen.slide-up { transform: translateY(-100%); opacity: 0; pointer-events: none; }
        .star { position: absolute; background: white; border-radius: 50%; animation: twinkle var(--duration) ease-in-out infinite; opacity: var(--opacity); }
        
        /* Class untuk memutar ikon musik */
        .music-rotating i { animation: spin-music 3s linear infinite; }
        @keyframes spin-music { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        ::-webkit-scrollbar { width: 4px; height: 4px; }
        ::-webkit-scrollbar-track { background: #020617; }
        ::-webkit-scrollbar-thumb { background: #1e293b; border-radius: 10px; }
        ::-webkit-scrollbar-thumb:hover { background: #22d3ee; }
        .card-hover:hover { transform: translateY(-5px); box-shadow: 0 10px 30px -5px rgba(34, 211, 238, 0.2); border-color: rgba(34, 211, 238, 0.4); }
        .text-cyan-glow { background: linear-gradient(to right, #22d3ee, #38bdf8, #22d3ee); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-size: 200% auto; text-shadow: 0 0 15px rgba(34, 211, 238, 0.3); animation: shine 4s linear infinite; }
        @keyframes shine { 0% { background-position: 0% center; } 100% { background-position: 200% center; } }
        select { -webkit-appearance: none; -moz-appearance: none; appearance: none; background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%2322d3ee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e"); background-repeat: no-repeat; background-position: right 1rem center; background-size: 1em; }
        .modal { transition: opacity 0.3s ease, visibility 0.3s ease; }
        .modal.hidden { opacity: 0; visibility: hidden; pointer-events: none; }
        .modal:not(.hidden) { opacity: 1; visibility: visible; pointer-events: auto; }
        details > summary { list-style: none; }
        details > summary::-webkit-details-marker { display: none; }
        details[open] summary ~ * { animation: sweep .3s ease-in-out; }
        @keyframes sweep { 0% {opacity: 0; margin-top: -10px} 100% {opacity: 1; margin-top: 0px} }
    </style>
</head>
<body class="antialiased selection:bg-cyan-500 selection:text-white">

    <!-- AUDIO ELEMENT -->
    <audio id="bg-audio" loop>
        <source src="musik.mp3" type="audio/mpeg">
    </audio>

    <!-- Music Control Button (Kiri Bawah) -->
    <button id="music-btn" onclick="toggleMusic()" class="fixed bottom-6 left-6 z-[60] w-12 h-12 bg-white/10 backdrop-blur-md border border-cyan-400/30 rounded-full flex items-center justify-center text-cyan-400 hover:bg-cyan-400 hover:text-white transition-all duration-300 hidden shadow-[0_0_20px_rgba(34,211,238,0.3)]">
        <i class="fas fa-music text-lg"></i>
    </button>

    <!-- Floating Action Buttons (Hanya muncul saat Admin Login) -->
    <div id="admin-tools" class="hidden">
        <!-- Add Item -->
        <button onclick="openFormModal()" class="fixed bottom-24 right-6 z-[60] w-12 h-12 bg-green-500/80 backdrop-blur-md border border-green-400 rounded-full flex items-center justify-center text-white hover:bg-green-600 transition-all duration-300 shadow-lg animate-bounce" title="Tambah Desain">
            <i class="fas fa-plus text-lg"></i>
        </button>
        <!-- Add FAQ -->
        <button onclick="openFaqModal()" class="fixed bottom-40 right-6 z-[60] w-12 h-12 bg-sky-500/80 backdrop-blur-md border border-sky-400 rounded-full flex items-center justify-center text-white hover:bg-sky-600 transition-all duration-300 shadow-lg" title="Tambah FAQ">
            <i class="fas fa-question text-lg"></i>
        </button>
        <!-- Upload Initial Data -->
        <button id="restore-data-btn" onclick="uploadInitialData()" class="fixed top-24 right-6 z-[60] px-4 py-2 bg-yellow-600/80 backdrop-blur-md border border-yellow-400 rounded-full text-white text-xs hover:bg-yellow-500 transition-all duration-300 shadow-lg">
            <i class="fas fa-cloud-upload-alt mr-2"></i> Upload Data Bawaan
        </button>
        <!-- Reset Data -->
        <button id="reset-data-btn" onclick="resetDatabase()" class="fixed top-36 right-6 z-[60] px-4 py-2 bg-red-600/80 backdrop-blur-md border border-red-400 rounded-full text-white text-xs hover:bg-red-500 transition-all duration-300 shadow-lg">
            <i class="fas fa-bomb mr-2"></i> Hapus Semua Data
        </button>
    </div>

    <!-- === COVER SCREEN === -->
    <section id="cover-screen" class="fixed inset-0 z-[100] flex flex-col items-center justify-center text-center overflow-hidden">
        <div id="stars-container" class="absolute inset-0 z-0 pointer-events-none"></div>
        <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-[500px] h-[500px] bg-cyan-500/10 rounded-full blur-[100px] animate-pulse-glow"></div>
        <div class="relative z-10 px-4" data-aos="zoom-in" data-aos-duration="1500">
            <div class="mb-6 inline-block">
                <i class="fas fa-star text-cyan-300 text-xs animate-twinkle" style="animation-delay: 0s;"></i>
                <span class="mx-2 text-cyan-300 text-[10px] tracking-[0.4em] uppercase font-bold">Malik Faza Studio</span>
                <i class="fas fa-star text-cyan-300 text-xs animate-twinkle" style="animation-delay: 1s;"></i>
            </div>
            <h1 class="text-4xl md:text-6xl font-heading font-bold text-white mb-2 tracking-widest leading-tight drop-shadow-lg">
                KATALOG <br>
                <span class="text-cyan-glow italic font-serif">Exclusive</span>
            </h1>
            <p class="text-slate-400 text-sm md:text-base font-light mb-10 max-w-md mx-auto leading-relaxed">
                Temukan keindahan dalam setiap detail undangan digital untuk momen spesial Anda.
            </p>
            <button onclick="openCatalog()" class="group relative px-8 py-3 bg-transparent overflow-hidden rounded-full border border-cyan-500/50 hover:border-cyan-400 transition-all duration-300">
                <div class="absolute inset-0 w-0 bg-gradient-to-r from-cyan-600 to-sky-500 transition-all duration-[250ms] ease-out group-hover:w-full opacity-10"></div>
                <div class="absolute inset-0 w-full h-full bg-gradient-to-r from-cyan-600 to-sky-500 opacity-0 group-hover:opacity-100 transition-opacity duration-300 -z-10"></div>
                <span class="relative flex items-center gap-3 text-white font-medium tracking-wider text-sm">
                    <i class="fas fa-book-open"></i> BUKA KATALOG
                </span>
            </button>
            <div class="mt-12 text-slate-500 text-[10px] animate-bounce">
                <p>Ketuk untuk membuka & memutar musik</p>
                <i class="fas fa-chevron-down mt-2"></i>
            </div>
        </div>
    </section>

    <!-- === MAIN CONTENT === -->
    <canvas id="canvas-bg"></canvas>

    <!-- Navbar -->
    <nav class="fixed w-full z-50 transition-all duration-300 bg-[#020617]/80 backdrop-blur-md border-b border-white/5" id="navbar">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16 md:h-20">
                <div class="flex-shrink-0">
                    <a href="#" class="font-heading text-xl md:text-2xl font-bold tracking-widest text-white hover:text-cyan-300 transition-colors">
                        MALIK<span class="text-cyan-glow">FAZA</span>
                    </a>
                </div>
                <!-- Desktop Menu -->
                <div class="hidden md:flex items-center">
                    <div class="ml-10 flex items-baseline space-x-6">
                        <a href="#home" class="hover:text-cyan-400 px-3 py-2 rounded-md text-sm font-medium transition-colors">Beranda</a>
                        <a href="#catalog" class="hover:text-cyan-400 px-3 py-2 rounded-md text-sm font-medium transition-colors">Katalog</a>
                        <a href="#features" class="hover:text-cyan-400 px-3 py-2 rounded-md text-sm font-medium transition-colors">Fitur</a>
                        <a href="#faq" class="hover:text-cyan-400 px-3 py-2 rounded-md text-sm font-medium transition-colors">FAQ</a>
                        <a href="https://wa.me/6285161141114" target="_blank" class="px-5 py-2 bg-gradient-to-r from-cyan-600 to-sky-500 text-white font-bold rounded-full hover:shadow-[0_0_15px_rgba(34,211,238,0.6)] transition-all transform hover:scale-105 text-xs tracking-wider">HUBUNGI KAMI</a>
                        
                        <!-- Login Button Desktop -->
                        <button id="nav-auth-desktop" onclick="toggleAdminModal()" class="text-slate-400 hover:text-white px-3 py-2 rounded-md text-sm font-medium transition-colors border border-white/10 hover:border-cyan-400 ml-4 flex items-center">
                            <i class="fas fa-lock mr-2 text-xs"></i> Login
                        </button>
                    </div>
                </div>
                <!-- Mobile Menu Button -->
                <div class="-mr-2 flex md:hidden">
                    <button type="button" class="inline-flex items-center justify-center p-2 rounded-md text-cyan-400 hover:text-white focus:outline-none" onclick="toggleMobileMenu()">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        <!-- Mobile Menu -->
        <div class="hidden md:hidden bg-[#020617]/95 backdrop-blur-xl border-t border-white/10" id="mobile-menu">
            <div class="px-4 pt-4 pb-6 space-y-2">
                <a href="#home" class="block px-3 py-2 rounded-lg text-sm font-medium text-white hover:bg-white/5 hover:text-cyan-400">Beranda</a>
                <a href="#catalog" class="block px-3 py-2 rounded-lg text-sm font-medium text-white hover:bg-white/5 hover:text-cyan-400">Katalog</a>
                <a href="#features" class="block px-3 py-2 rounded-lg text-sm font-medium text-white hover:bg-white/5 hover:text-cyan-400">Fitur</a>
                <a href="#faq" class="block px-3 py-2 rounded-lg text-sm font-medium text-white hover:bg-white/5 hover:text-cyan-400">FAQ</a>
                <a href="https://wa.me/6285161141114" class="block px-3 py-2 rounded-lg text-sm font-medium text-cyan-400 hover:bg-white/5">Kontak</a>
                
                <!-- Login Button Mobile -->
                <button id="nav-auth-mobile" onclick="toggleAdminModal()" class="block w-full text-left px-3 py-2 rounded-lg text-sm font-medium text-slate-300 hover:bg-white/5 hover:text-white border-t border-white/10 mt-2 pt-3">
                    <i class="fas fa-lock mr-2 text-xs"></i> Login Admin
                </button>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section id="home" class="relative min-h-[90vh] flex items-center justify-center pt-20 overflow-hidden">
        <div class="absolute top-1/4 -left-20 w-64 h-64 bg-cyan-500/10 rounded-full blur-[80px] animate-float"></div>
        <div class="absolute bottom-1/4 -right-20 w-80 h-80 bg-sky-600/10 rounded-full blur-[100px] animate-float" style="animation-delay: 2s"></div>
        <div class="relative z-10 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center" data-aos="fade-up">
            <div class="inline-block mb-4 px-3 py-1 border border-cyan-500/30 rounded-full bg-cyan-500/5 backdrop-blur-sm">
                <span class="text-cyan-300 text-[10px] md:text-xs font-bold tracking-[0.2em] uppercase">Malik Faza Studio</span>
            </div>
            <h1 class="text-4xl md:text-7xl font-heading font-bold mb-4 md:mb-6 leading-tight tracking-wide">
                UNDANGAN <br> <span class="text-cyan-glow">DIGITAL</span>
            </h1>
            <p class="mt-2 max-w-lg mx-auto text-sm md:text-lg text-slate-300 font-light mb-8 leading-relaxed px-4">
                Solusi undangan digital masa kini. Hemat, praktis, & estetik dengan nuansa modern yang elegan.
            </p>
            <div class="flex flex-col sm:flex-row gap-3 justify-center px-6">
                <a href="#catalog" class="px-6 py-3 bg-gradient-to-r from-cyan-600 to-sky-500 text-white text-sm font-bold rounded-full shadow-lg shadow-cyan-500/20 hover:shadow-cyan-500/40 transition-all hover:-translate-y-1">Lihat Katalog</a>
                <a href="https://wa.me/6285161141114" target="_blank" class="px-6 py-3 border border-white/10 hover:border-cyan-400 hover:text-cyan-300 bg-white/5 backdrop-blur-sm text-sm font-semibold rounded-full transition-all">Konsultasi</a>
            </div>
        </div>
    </section>

    <!-- Catalog Section -->
    <section id="catalog" class="py-16 md:py-24 relative z-10">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-10" data-aos="fade-up">
                <h2 class="text-2xl md:text-4xl font-heading font-bold mb-3 text-white">Koleksi Desain</h2>
                <div class="w-16 h-1 bg-gradient-to-r from-cyan-400 to-sky-500 mx-auto rounded-full mb-4"></div>
                <p class="text-slate-400 text-xs md:text-base max-w-xl mx-auto">Temukan tema impian Anda di sini.</p>
                <div id="admin-badge" class="hidden mt-4 flex justify-center items-center gap-2">
                    <span class="px-3 py-1 bg-green-500/20 text-green-400 border border-green-500/50 rounded-full text-xs font-bold uppercase tracking-wider">
                        <i class="fas fa-user-shield mr-1"></i> Mode Admin Aktif
                    </span>
                </div>
            </div>

            <div class="max-w-[200px] mx-auto mb-8 relative z-20" data-aos="fade-up" data-aos-delay="100">
                <div class="relative">
                    <select id="category-filter" onchange="filterCatalog()" class="block w-full pl-4 pr-10 py-2.5 text-sm border border-white/10 rounded-2xl bg-[#0f172a]/80 text-white focus:outline-none focus:border-cyan-500 transition-all cursor-pointer shadow-lg backdrop-blur-sm text-center appearance-none hover:border-cyan-500/50">
                        <option value="all" class="text-black">Semua Kategori</option>
                        <option value="pernikahan" class="text-black">üíç Pernikahan</option>
                        <option value="khitanan" class="text-black">‚úÇÔ∏è Khitanan</option>
                        <option value="aqiqah" class="text-black">üë∂ Aqiqah</option>
                    </select>
                </div>
            </div>

            <div id="catalog-grid" class="grid grid-cols-2 md:grid-cols-2 lg:grid-cols-4 gap-3 md:gap-6 min-h-[400px]">
                <!-- Loading State (will be replaced) -->
                <div class="col-span-full text-center py-10 text-slate-500 animate-pulse">Memuat data...</div>
            </div>

            <div id="empty-state" class="hidden py-8 text-center">
                <div class="text-4xl mb-2">üîç</div>
                <p class="text-slate-400 text-sm">Kategori belum tersedia.</p>
            </div>
        </div>
    </section>

    <!-- Features Section -->
    <section id="features" class="py-16 bg-gradient-to-t from-[#0f172a]/50 to-[#020617]/50 border-t border-white/5 relative z-10 backdrop-blur-sm">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-16" data-aos="fade-up">
                <h2 class="text-3xl font-heading font-bold mb-4 text-white">Mengapa Memilih Kami?</h2>
                <div class="w-24 h-1 bg-cyan-400 mx-auto rounded-full"></div>
            </div>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="p-8 rounded-2xl bg-white/5 border border-white/5 text-center hover:bg-white/10 transition-colors group hover:border-cyan-400/50" data-aos="fade-up">
                    <div class="w-16 h-16 bg-cyan-400/10 text-cyan-400 rounded-full flex items-center justify-center mx-auto mb-6 text-2xl group-hover:scale-110 transition-transform"><i class="fas fa-gem"></i></div>
                    <h3 class="text-xl font-bold text-white mb-3">Desain Premium</h3>
                    <p class="text-slate-400 text-sm leading-relaxed">Estetika tinggi untuk momen spesial.</p>
                </div>
                <div class="p-8 rounded-2xl bg-white/5 border border-white/5 text-center hover:bg-white/10 transition-colors group hover:border-cyan-400/50" data-aos="fade-up" data-aos-delay="100">
                    <div class="w-16 h-16 bg-cyan-400/10 text-cyan-400 rounded-full flex items-center justify-center mx-auto mb-6 text-2xl group-hover:scale-110 transition-transform"><i class="fas fa-bolt"></i></div>
                    <h3 class="text-xl font-bold text-white mb-3">Proses Cepat</h3>
                    <p class="text-slate-400 text-sm leading-relaxed">Siap disebar dalam waktu singkat.</p>
                </div>
                <div class="p-8 rounded-2xl bg-white/5 border border-white/5 text-center hover:bg-white/10 transition-colors group hover:border-cyan-400/50" data-aos="fade-up" data-aos-delay="200">
                    <div class="w-16 h-16 bg-cyan-400/10 text-cyan-400 rounded-full flex items-center justify-center mx-auto mb-6 text-2xl group-hover:scale-110 transition-transform"><i class="fas fa-infinity"></i></div>
                    <h3 class="text-xl font-bold text-white mb-3">Revisi Tanpa Batas</h3>
                    <p class="text-slate-400 text-sm leading-relaxed">Garansi revisi data hingga sesuai.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- FAQ Section -->
    <section id="faq" class="py-16 relative z-10">
        <div class="max-w-3xl mx-auto px-6">
            <div class="text-center mb-8" data-aos="fade-up">
                <h2 class="text-2xl font-heading font-bold mb-2 text-white">FAQ</h2>
                <div class="w-10 h-0.5 bg-cyan-500 mx-auto rounded-full"></div>
            </div>
            <div id="faq-list" class="space-y-3" data-aos="fade-up">
                <div class="text-center text-slate-500 text-sm">Memuat FAQ...</div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer id="contact" class="bg-[#020617] pt-12 pb-8 border-t border-white/5 relative z-10">
        <div class="max-w-6xl mx-auto px-6">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                <div>
                    <h3 class="font-heading text-xl font-bold text-white mb-2">MALIK<span class="text-cyan-glow">FAZA</span></h3>
                    <p class="text-xs text-slate-500 mb-6 max-w-xs">Solusi undangan digital masa kini.</p>
                </div>
                <div class="text-sm">
                     <h4 class="text-white font-bold mb-4 text-xs uppercase tracking-wider">Kontak</h4>
                     <ul class="space-y-3 text-slate-400 text-xs">
                        <li class="flex items-center gap-2"><i class="fas fa-map-marker-alt text-cyan-500"></i> <span>Majalengka, Jawa Barat</span></li>
                        <li class="flex items-center gap-2 group"><i class="fas fa-phone text-sky-500"></i> <a href="https://wa.me/6285161141114" target="_blank" class="hover:text-cyan-400 transition-colors">+62 851-6114-1114</a></li>
                     </ul>
                </div>
            </div>
            <div class="border-t border-white/5 pt-6 text-center text-[10px] text-slate-600">
                &copy; 2025 Malik Faza Studio.
            </div>
        </div>
    </footer>

    <!-- ===== MODALS ===== -->

    <!-- Admin Login Modal -->
    <div id="login-modal" class="modal hidden fixed inset-0 z-[200] flex items-center justify-center bg-black/80 backdrop-blur-sm">
        <div class="bg-[#0f172a] p-8 rounded-2xl border border-white/10 w-full max-w-xs relative text-center shadow-2xl">
            <button onclick="toggleAdminModal()" class="absolute top-4 right-4 text-slate-400 hover:text-white"><i class="fas fa-times"></i></button>
            <h3 class="text-xl font-bold text-white mb-6 font-heading">Admin Login</h3>
            <div class="relative w-full mb-4">
                <input type="password" id="admin-pass-input" placeholder="Masukkan Password" class="w-full px-4 py-2 pr-10 bg-black/50 border border-white/10 rounded-lg text-white focus:outline-none focus:border-cyan-500">
                <button type="button" onclick="togglePasswordVisibility()" class="absolute right-3 top-2.5 text-slate-400 hover:text-white focus:outline-none">
                    <i id="eye-icon" class="fas fa-eye"></i>
                </button>
            </div>
            <button onclick="checkAdminLogin()" class="w-full py-2 bg-gradient-to-r from-cyan-600 to-sky-500 text-white font-bold rounded-lg hover:shadow-[0_0_15px_rgba(34,211,238,0.4)] transition-all">MASUK</button>
        </div>
    </div>

    <!-- Add/Edit Item Modal -->
    <div id="form-modal" class="modal hidden fixed inset-0 z-[200] flex items-center justify-center bg-black/80 backdrop-blur-sm overflow-y-auto py-10">
        <div class="bg-[#0f172a] p-8 rounded-2xl border border-white/10 w-full max-w-md relative shadow-2xl my-auto">
            <button onclick="closeFormModal()" class="absolute top-4 right-4 text-slate-400 hover:text-white"><i class="fas fa-times"></i></button>
            <h3 id="form-title" class="text-xl font-bold text-white mb-6 font-heading">Tambah Desain</h3>
            
            <input type="hidden" id="item-id">
            
            <div class="space-y-4">
                <div>
                    <label class="text-xs text-slate-400 mb-1 block">Judul Tema</label>
                    <input type="text" id="item-title" class="w-full px-4 py-2 bg-black/50 border border-white/10 rounded-lg text-white focus:border-cyan-500 focus:outline-none">
                </div>
                <div>
                    <label class="text-xs text-slate-400 mb-1 block">Kategori</label>
                    <select id="item-category" class="w-full px-4 py-2 bg-black/50 border border-white/10 rounded-lg text-white focus:border-cyan-500 focus:outline-none">
                        <option value="pernikahan">Pernikahan</option>
                        <option value="khitanan">Khitanan</option>
                        <option value="aqiqah">Aqiqah</option>
                    </select>
                </div>
                <div>
                    <label class="text-xs text-slate-400 mb-1 block">Link Preview (URL)</label>
                    <input type="text" id="item-link" class="w-full px-4 py-2 bg-black/50 border border-white/10 rounded-lg text-white focus:border-cyan-500 focus:outline-none">
                </div>
                <div>
                    <label class="text-xs text-slate-400 mb-1 block">Tag (Opsional)</label>
                    <input type="text" id="item-tag" placeholder="Contoh: Premium, Best Seller" class="w-full px-4 py-2 bg-black/50 border border-white/10 rounded-lg text-white focus:border-cyan-500 focus:outline-none">
                </div>
                
                <!-- Image Upload with Preview -->
                <div>
                    <label class="text-xs text-slate-400 mb-1 block">Foto Sampul</label>
                    <div id="upload-area" class="relative w-full h-48 bg-black/50 border-2 border-dashed border-white/20 rounded-lg flex items-center justify-center overflow-hidden group cursor-pointer hover:border-cyan-500 transition-colors" tabindex="0">
                        <input type="file" id="item-image-file" accept="image/png, image/jpeg, image/jpg" class="absolute inset-0 opacity-0 cursor-pointer z-10" onchange="previewImage(this)">
                        <img id="image-preview" class="w-full h-full object-cover hidden" />
                        <div id="upload-placeholder" class="text-center p-4">
                            <i class="fas fa-cloud-upload-alt text-2xl text-slate-500 mb-2"></i>
                            <p class="text-xs text-slate-500">Klik untuk upload foto <br> atau <span class="text-cyan-400 font-bold">Paste (Ctrl+V)</span> disini</p>
                        </div>
                    </div>
                </div>

                <button onclick="saveItem()" class="w-full py-3 bg-gradient-to-r from-cyan-600 to-sky-500 text-white font-bold rounded-lg hover:shadow-[0_0_15px_rgba(34,211,238,0.4)] transition-all mt-4">SIMPAN DATA</button>
            </div>
        </div>
    </div>

    <!-- FAQ Modal (Add/Edit) -->
    <div id="faq-modal" class="modal hidden fixed inset-0 z-[200] flex items-center justify-center bg-black/80 backdrop-blur-sm">
        <div class="bg-[#0f172a] p-8 rounded-2xl border border-white/10 w-full max-w-md relative shadow-2xl">
            <button onclick="closeFaqModal()" class="absolute top-4 right-4 text-slate-400 hover:text-white"><i class="fas fa-times"></i></button>
            <h3 id="faq-modal-title" class="text-xl font-bold text-white mb-6 font-heading">Tambah FAQ</h3>
            
            <input type="hidden" id="faq-id">
            
            <div class="space-y-4">
                <div>
                    <label class="text-xs text-slate-400 mb-1 block">Pertanyaan</label>
                    <input type="text" id="faq-question" class="w-full px-4 py-2 bg-black/50 border border-white/10 rounded-lg text-white focus:border-cyan-500 focus:outline-none">
                </div>
                <div>
                    <label class="text-xs text-slate-400 mb-1 block">Jawaban</label>
                    <textarea id="faq-answer" rows="3" class="w-full px-4 py-2 bg-black/50 border border-white/10 rounded-lg text-white focus:border-cyan-500 focus:outline-none"></textarea>
                </div>
                <button onclick="saveFaq()" class="w-full py-3 bg-gradient-to-r from-sky-600 to-blue-500 text-white font-bold rounded-lg hover:brightness-110 transition-all">SIMPAN FAQ</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>
    
    <!-- FIREBASE MODULE SCRIPT -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, getDocs, updateDoc, deleteDoc, doc, onSnapshot, writeBatch } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // --- GANTI BAGIAN INI DENGAN CONFIG FIREBASE KAKAK ---
        const firebaseConfig = {
  apiKey: "AIzaSyBoNAKRutDNTT7QjBH1NzHU5sXX31bxjXM",
  authDomain: "katalog-82fbf.firebaseapp.com",
  projectId: "katalog-82fbf",
  storageBucket: "katalog-82fbf.firebasestorage.app",
  messagingSenderId: "410997646826",
  appId: "1:410997646826:web:8d292ce5afb4955f2bbe93",
  measurementId: "G-220BRVP5H5"
        };
        // -----------------------------------------------------

        // INITIAL DATA BACKUP (CATALOG)
        const initialData = [
            { id: 1, title: "Blue Elegant", category: "pernikahan", image: "blue1.jpg", link: "https://wedding12.pages.dev/", tag: "Premium" },
            { id: 2, title: "Sage Garden", category: "pernikahan", image: "black golden.jpg", link: "https://wedding8mf.pages.dev/", tag: "Best Seller" },
            { id: 3, title: "Blue Islamic", category: "khitanan", image: "blue-islamic.jpg", link: "https://wedding10.pages.dev/", tag: "" },
            { id: 4, title: "Pastel Baby", category: "aqiqah", image: "pastel-baby.jpg", link: "https://wedding7mf.pages.dev/", tag: "" },
            { id: 5, title: "Ethnic Royal", category: "pernikahan", image: "ethnic-royal.jpg", link: "https://wedding6mf.pages.dev/", tag: "" },
            { id: 6, title: "Dark Floral", category: "pernikahan", image: "dark-floral.jpg", link: "https://wedding3-arv.pages.dev/", tag: "" },
            { id: 7, title: "Clean White", category: "pernikahan", image: "clean-white.jpg", link: "https://wedding2-us3.pages.dev/", tag: "" },
            { id: 8, title: "Modern Fun", category: "khitanan", image: "modern-fun.jpg", link: "https://undangan-digital-9jj.pages.dev/", tag: "" },
            { id: 9, title: "Golden Lantern", category: "aqiqah", image: "golden-lantern.jpg", link: "https://wdding4.pages.dev/", tag: "" },
            { id: 10, title: "Blue Sky", category: "pernikahan", image: "blue-sky.jpg", link: "https://wedding5mf.pages.dev/", tag: "" },
            { id: 11, title: "Navy Gold", category: "pernikahan", image: "navy-gold.jpg", link: "https://wedding13.pages.dev/", tag: "" },
            { id: 12, title: "Kids Hero", category: "khitanan", image: "kids-hero.jpg", link: "https://wedding14.pages.dev/", tag: "" },
            { id: 13, title: "Green Leaf", category: "aqiqah", image: "green-leaf.jpg", link: "https://wedding15.pages.dev/", tag: "" },
            { id: 14, title: "Rustic Wood", category: "pernikahan", image: "rustic-wood.jpg", link: "https://wedding9mf.pages.dev/", tag: "" },
            { id: 15, title: "Modern Gradient", category: "pernikahan", image: "modern-gradient.jpg", link: "https://wedding8mf.pages.dev/", tag: "" },
            { id: 16, title: "Adventure", category: "khitanan", image: "adventure.jpg", link: "https://wedding10.pages.dev/", tag: "" },
            { id: 17, title: "Cloudy Blue", category: "aqiqah", image: "cloudy-blue.jpg", link: "https://wedding7mf.pages.dev/", tag: "" },
            { id: 18, title: "Javanese Classic", category: "pernikahan", image: "javanese-classic.jpg", link: "https://wedding6mf.pages.dev/", tag: "" },
            { id: 19, title: "Mandala Gold", category: "pernikahan", image: "mandala-gold.jpg", link: "https://wedding3-arv.pages.dev/", tag: "" },
            { id: 20, title: "Space Rocket", category: "khitanan", image: "space-rocket.jpg", link: "https://undangan-digital-9jj.pages.dev/", tag: "" },
        ];

        // INITIAL DATA BACKUP (FAQ)
        const initialFaqData = [
            { id: 1, q: "Berapa lama prosesnya?", a: "Normalnya 1x24 jam. Kilat bisa 3-6 jam (ada biaya tambahan)." },
            { id: 2, q: "Bisa revisi data?", a: "Ya, revisi data (nama, tempat, waktu) gratis sepuasnya sampai hari H acara." }
        ];

        let app, db;
        let isFirebaseReady = false;

        try {
            if (firebaseConfig.apiKey !== "API_KEY_KAMU") {
                app = initializeApp(firebaseConfig);
                db = getFirestore(app);
                isFirebaseReady = true;
            } else {
                console.warn("Firebase Config belum diisi!");
            }
        } catch(e) {
            console.error("Firebase Error:", e);
        }

        // --- RESET DATABASE (DELETE ALL) ---
        window.resetDatabase = async function() {
            if (!isFirebaseReady) return Swal.fire('Error', 'Firebase belum siap', 'error');
            
            Swal.fire({
                title: 'Hapus SEMUA Data?',
                text: "PERINGATAN: Semua katalog dan FAQ di database akan dihapus permanen! Database akan menjadi kosong (0).",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#d33',
                confirmButtonText: 'Ya, Hapus Semua!',
                cancelButtonText: 'Batal'
            }).then(async (result) => {
                if (result.isConfirmed) {
                    Swal.showLoading();
                    try {
                        const batch = writeBatch(db);
                        
                        // Get all Catalogs
                        const catSnapshot = await getDocs(collection(db, "catalogs"));
                        catSnapshot.forEach((doc) => {
                            batch.delete(doc.ref);
                        });
                        
                        // Get all FAQs
                        const faqSnapshot = await getDocs(collection(db, "faqs"));
                        faqSnapshot.forEach((doc) => {
                            batch.delete(doc.ref);
                        });

                        await batch.commit();
                        Swal.fire('Terhapus', 'Database telah dikosongkan.', 'success');
                    } catch (e) {
                        console.error(e);
                        Swal.fire('Error', 'Gagal menghapus data: ' + e.message, 'error');
                    }
                }
            });
        }

        // --- BATCH UPLOAD FUNCTION ---
        window.uploadInitialData = async function() {
            if (!isFirebaseReady) return Swal.fire('Error', 'Firebase belum siap', 'error');
            
            Swal.fire({
                title: 'Upload Data Bawaan?',
                text: "Ini akan menambahkan 20 item katalog DAN FAQ bawaan ke database online Anda.",
                icon: 'question',
                showCancelButton: true,
                confirmButtonText: 'Ya, Upload',
                cancelButtonText: 'Batal'
            }).then(async (result) => {
                if (result.isConfirmed) {
                    Swal.showLoading();
                    const batch = writeBatch(db);
                    
                    // Upload Catalog
                    initialData.forEach((item) => {
                        const docRef = doc(collection(db, "catalogs")); 
                        const { id, ...data } = item; 
                        batch.set(docRef, { ...data, createdAt: new Date() });
                    });

                    // Upload FAQ
                    initialFaqData.forEach((item) => {
                        const docRef = doc(collection(db, "faqs"));
                        const { id, ...data } = item;
                        batch.set(docRef, { ...data, createdAt: new Date() });
                    });

                    try {
                        await batch.commit();
                        Swal.fire('Sukses', 'Data bawaan berhasil diupload ke database!', 'success');
                    } catch(e) {
                        console.error(e);
                        Swal.fire('Gagal', 'Terjadi kesalahan saat upload.', 'error');
                    }
                }
            });
        }

        // Expose functions globally
        window.saveItem = async function() {
            if (!isFirebaseReady) return Swal.fire('Error', 'Firebase belum dikonfigurasi!', 'error');

            const id = document.getElementById('item-id').value;
            const title = document.getElementById('item-title').value;
            const category = document.getElementById('item-category').value;
            const link = document.getElementById('item-link').value;
            const tag = document.getElementById('item-tag').value;
            const image = window.tempImageBase64;

            if (!title || !link || !image) {
                Swal.fire({ icon: 'warning', text: 'Mohon lengkapi data (Judul, Link, Foto)' });
                return;
            }

            Swal.showLoading();

            try {
                if (id) {
                    await updateDoc(doc(db, "catalogs", id), {
                        title, category, link, tag, image, updatedAt: new Date()
                    });
                } else {
                    await addDoc(collection(db, "catalogs"), {
                        title, category, link, tag, image, createdAt: new Date()
                    });
                }
                closeFormModal();
                Swal.fire({ icon: 'success', title: 'Berhasil', showConfirmButton: false, timer: 1000 });
            } catch (e) {
                console.error(e);
                Swal.fire('Error', 'Gagal menyimpan data.', 'error');
            }
        };

        window.deleteItem = async function(id) {
            if (!isFirebaseReady) return;
             Swal.fire({
                title: 'Hapus desain ini?', text: "Data tidak bisa dikembalikan!", icon: 'warning', showCancelButton: true, confirmButtonColor: '#d33', confirmButtonText: 'Ya, hapus!'
            }).then(async (result) => {
                if (result.isConfirmed) {
                    if (typeof id === 'number') {
                         Swal.fire('Info', 'Ini data lokal. Silahkan upload ke database dulu untuk mengelola.', 'info');
                         return;
                    }
                    await deleteDoc(doc(db, "catalogs", id));
                    Swal.fire('Terhapus!', 'Desain telah dihapus.', 'success');
                }
            });
        };

        window.saveFaq = async function() {
            if (!isFirebaseReady) return;
            const id = document.getElementById('faq-id').value;
            const q = document.getElementById('faq-question').value;
            const a = document.getElementById('faq-answer').value;

            if (!q || !a) {
                Swal.fire({ icon: 'warning', text: 'Mohon isi pertanyaan dan jawaban' });
                return;
            }

            Swal.showLoading();
            try {
                if (id) {
                    await updateDoc(doc(db, "faqs", id), { q, a });
                } else {
                    await addDoc(collection(db, "faqs"), { q, a, createdAt: new Date() });
                }
                closeFaqModal();
                Swal.fire({ icon: 'success', title: 'FAQ Disimpan', showConfirmButton: false, timer: 1000 });
            } catch(e) {
                 Swal.fire('Error', 'Gagal menyimpan FAQ.', 'error');
            }
        }

        window.deleteFaq = async function(id) {
            if (!isFirebaseReady) return;
            Swal.fire({
                title: 'Hapus FAQ ini?', icon: 'warning', showCancelButton: true, confirmButtonColor: '#d33', confirmButtonText: 'Ya, hapus!'
            }).then(async (result) => {
                if (result.isConfirmed) {
                    if (typeof id === 'number') {
                         Swal.fire('Info', 'Ini data lokal. Silahkan upload ke database dulu untuk mengelola.', 'info');
                         return;
                    }
                    await deleteDoc(doc(db, "faqs", id));
                    Swal.fire('Terhapus!', 'FAQ telah dihapus.', 'success');
                }
            });
        }

        // Realtime Listeners
        if (isFirebaseReady) {
            // Listen Catalog
            onSnapshot(collection(db, "catalogs"), (snapshot) => {
                if (snapshot.empty) {
                    window.catalogData = initialData;
                    window.isUsingLocalData = true;
                } else {
                    const data = [];
                    snapshot.forEach((doc) => {
                        data.push({ id: doc.id, ...doc.data() });
                    });
                    window.catalogData = data; 
                    window.isUsingLocalData = false;
                }
                window.renderCatalog();
                window.updateAdminUI(); 
            });

            // Listen FAQ
            onSnapshot(collection(db, "faqs"), (snapshot) => {
                if (snapshot.empty) {
                    window.faqData = initialFaqData;
                } else {
                    const data = [];
                    snapshot.forEach((doc) => {
                        data.push({ id: doc.id, ...doc.data() });
                    });
                    window.faqData = data;
                }
                window.renderFaq();
            });
        } else {
             // Fallback
             window.catalogData = initialData;
             window.faqData = initialFaqData;
             window.renderCatalog();
             window.renderFaq();
        }

    </script>

    <!-- Main Logic Script (UI) -->
    <script>
        AOS.init({ duration: 600, once: true, offset: 30 });

        // Global Variables
        window.catalogData = [];
        window.faqData = [];
        window.isAdmin = false;
        window.isUsingLocalData = false;
        window.tempImageBase64 = "";
        const ADMIN_PASS = "malikfaza99";

        // --- RENDER FUNCTIONS ---
        window.renderCatalog = function() {
            const grid = document.getElementById('catalog-grid');
            const filter = document.getElementById('category-filter').value;
            grid.innerHTML = '';
            
            let hasItem = false;

            window.catalogData.forEach(item => {
                if (filter !== 'all' && item.category !== filter) return;
                hasItem = true;

                const card = document.createElement('div');
                card.className = "catalog-item group relative bg-white/5 rounded-2xl overflow-hidden border border-white/5 transition-all duration-300 hover:border-cyan-400/50 card-hover";
                card.setAttribute('data-aos', 'fade-up');
                
                const tagHtml = item.tag ? `<div class="absolute top-2 left-2 z-20"><span class="px-2 py-0.5 bg-cyan-600/90 backdrop-blur-sm text-white text-[9px] font-bold rounded-lg uppercase tracking-wider shadow-lg">${item.tag}</span></div>` : '';
                
                // Quote ID properly
                const idParam = typeof item.id === 'string' ? `'${item.id}'` : item.id;

                const adminControls = window.isAdmin ? `
                    <div class="absolute top-2 right-2 z-30 flex gap-2">
                        <button onclick="editItem(${idParam})" class="w-6 h-6 bg-yellow-500 rounded-full text-white text-[10px] flex items-center justify-center hover:bg-yellow-600 shadow-lg"><i class="fas fa-edit"></i></button>
                        <button onclick="deleteItem(${idParam})" class="w-6 h-6 bg-red-500 rounded-full text-white text-[10px] flex items-center justify-center hover:bg-red-600 shadow-lg"><i class="fas fa-trash"></i></button>
                    </div>
                ` : '';

                card.innerHTML = `
                    <div class="aspect-[9/16] overflow-hidden relative">
                        <div class="absolute inset-0 bg-gradient-to-t from-[#020617] to-transparent opacity-60 z-10"></div>
                        <img src="${item.image}" onerror="this.src='https://placehold.co/400x700/0f172a/22d3ee?text=No+Image'" class="w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-700">
                        ${tagHtml}
                        ${adminControls}
                    </div>
                    <div class="p-3 bg-[#020617]/90 backdrop-blur-md">
                        <p class="text-cyan-400 text-[9px] font-bold uppercase mb-0.5">${item.category}</p>
                        <h3 class="text-sm font-serif font-bold text-white mb-2 line-clamp-1">${item.title}</h3>
                        <div class="flex gap-2 mt-2">
                            <a href="${item.link}" target="_blank" class="flex-1 py-2 text-center text-[10px] border border-white/20 rounded-xl hover:bg-white hover:text-black transition-colors">Preview</a>
                            <a href="https://wa.me/6285161141114?text=Halo%20kak,%20saya%20mau%20pesan%20tema%20${encodeURIComponent(item.title)}" class="flex-1 py-2 text-center text-[10px] bg-gradient-to-r from-cyan-600 to-sky-500 text-white font-bold rounded-xl hover:brightness-110">Pesan</a>
                        </div>
                    </div>
                `;
                grid.appendChild(card);
            });
            document.getElementById('empty-state').classList.toggle('hidden', hasItem);
        }

        window.renderFaq = function() {
            const container = document.getElementById('faq-list');
            container.innerHTML = '';
            
            // Fallback content if empty
            if(window.faqData.length === 0) {
                container.innerHTML = `<div class="text-center text-slate-500 text-xs">Belum ada FAQ.</div>`;
                return;
            }

            window.faqData.forEach(item => {
                const details = document.createElement('details');
                details.className = "group bg-[#0f172a]/60 border border-white/5 rounded-2xl open:bg-[#0f172a]/80 transition-all duration-300 relative";
                
                const adminControls = window.isAdmin ? `
                    <div class="absolute right-12 top-4 flex gap-2 z-20">
                         <button onclick="editFaq('${item.id}')" class="text-yellow-500 hover:text-yellow-400 text-xs"><i class="fas fa-edit"></i></button>
                         <button onclick="deleteFaq('${item.id}')" class="text-red-500 hover:text-red-400 text-xs"><i class="fas fa-trash"></i></button>
                    </div>
                ` : '';

                details.innerHTML = `
                    <summary class="flex justify-between items-center p-4 cursor-pointer text-sm font-medium text-slate-200 hover:text-cyan-300 pr-20">
                        <span>${item.q}</span>
                        <i class="fas fa-chevron-down text-xs transition group-open:rotate-180 text-cyan-400 absolute right-4"></i>
                    </summary>
                    ${adminControls}
                    <div class="px-4 pb-4 text-xs text-slate-400 leading-relaxed border-t border-white/5 pt-2">
                        ${item.a}
                    </div>
                `;
                container.appendChild(details);
            });
        }

        window.filterCatalog = function() { window.renderCatalog(); }

        // --- ADMIN AUTH ---
        window.toggleAdminModal = function() { document.getElementById('login-modal').classList.toggle('hidden'); }

        window.togglePasswordVisibility = function() {
            const input = document.getElementById('admin-pass-input');
            const icon = document.getElementById('eye-icon');
            if (input.type === 'password') {
                input.type = 'text';
                icon.classList.remove('fa-eye');
                icon.classList.add('fa-eye-slash');
            } else {
                input.type = 'password';
                icon.classList.remove('fa-eye-slash');
                icon.classList.add('fa-eye');
            }
        }

        document.getElementById('admin-pass-input').addEventListener('keypress', function (e) {
            if (e.key === 'Enter') checkAdminLogin();
        });

        window.checkAdminLogin = function() {
            const pass = document.getElementById('admin-pass-input').value;
            if (pass === ADMIN_PASS) {
                window.isAdmin = true;
                window.updateAdminUI();
                toggleAdminModal();
                Swal.fire({ icon: 'success', title: 'Login Berhasil', text: 'Mode Admin Aktif', timer: 1500, showConfirmButton: false });
            } else {
                Swal.fire({ icon: 'error', title: 'Gagal', text: 'Password salah!' });
            }
        }

        window.adminLogout = function() {
            window.isAdmin = false;
            window.updateAdminUI();
            Swal.fire({ icon: 'success', title: 'Logout', text: 'Kembali ke mode pengunjung', timer: 1500, showConfirmButton: false });
        }

        window.updateAdminUI = function() {
            const navAuthDesktop = document.getElementById('nav-auth-desktop');
            const navAuthMobile = document.getElementById('nav-auth-mobile');
            const adminTools = document.getElementById('admin-tools');
            const badge = document.getElementById('admin-badge');

            if (window.isAdmin) {
                // Change Login to Logout (Desktop)
                navAuthDesktop.innerHTML = '<i class="fas fa-sign-out-alt mr-2 text-xs"></i> Logout';
                navAuthDesktop.setAttribute('onclick', 'adminLogout()');
                navAuthDesktop.classList.add('text-red-400', 'border-red-400/50');
                navAuthDesktop.classList.remove('text-slate-400', 'border-white/10');

                // Change Login to Logout (Mobile)
                navAuthMobile.innerHTML = '<i class="fas fa-sign-out-alt mr-2 text-xs"></i> Logout';
                navAuthMobile.setAttribute('onclick', 'adminLogout()');
                navAuthMobile.classList.add('text-red-400');
                navAuthMobile.classList.remove('text-slate-300');

                // Show Admin Tools
                adminTools.classList.remove('hidden');
                badge.classList.remove('hidden');

            } else {
                // Change Logout to Login (Desktop)
                navAuthDesktop.innerHTML = '<i class="fas fa-lock mr-2 text-xs"></i> Login';
                navAuthDesktop.setAttribute('onclick', 'toggleAdminModal()');
                navAuthDesktop.classList.remove('text-red-400', 'border-red-400/50');
                navAuthDesktop.classList.add('text-slate-400', 'border-white/10');

                // Change Logout to Login (Mobile)
                navAuthMobile.innerHTML = '<i class="fas fa-lock mr-2 text-xs"></i> Login Admin';
                navAuthMobile.setAttribute('onclick', 'toggleAdminModal()');
                navAuthMobile.classList.remove('text-red-400');
                navAuthMobile.classList.add('text-slate-300');

                // Hide Admin Tools
                adminTools.classList.add('hidden');
                badge.classList.add('hidden');
            }
            window.renderCatalog(); 
            window.renderFaq();
        }

        // --- CATALOG FORM ---
        window.openFormModal = function(isEdit = false, id = null) {
            const modal = document.getElementById('form-modal');
            const title = document.getElementById('form-title');
            
            document.getElementById('item-id').value = '';
            document.getElementById('item-title').value = '';
            document.getElementById('item-category').value = 'pernikahan';
            document.getElementById('item-link').value = '';
            document.getElementById('item-tag').value = '';
            document.getElementById('item-image-file').value = '';
            document.getElementById('image-preview').classList.add('hidden');
            document.getElementById('upload-placeholder').classList.remove('hidden');
            window.tempImageBase64 = "";

            if (isEdit && id) {
                // Prevent edit if ID is numeric (local data)
                if (typeof id === 'number') {
                    Swal.fire('Info', 'Data ini adalah preview lokal. Silahkan "Upload Data Bawaan" terlebih dahulu di menu Admin untuk mengeditnya.', 'info');
                    return;
                }

                title.innerText = "Edit Desain";
                const item = window.catalogData.find(d => d.id === id);
                if (item) {
                    document.getElementById('item-id').value = item.id;
                    document.getElementById('item-title').value = item.title;
                    document.getElementById('item-category').value = item.category;
                    document.getElementById('item-link').value = item.link;
                    document.getElementById('item-tag').value = item.tag;
                    
                    window.tempImageBase64 = item.image;
                    const preview = document.getElementById('image-preview');
                    preview.src = item.image;
                    preview.classList.remove('hidden');
                    document.getElementById('upload-placeholder').classList.add('hidden');
                }
            } else {
                title.innerText = "Tambah Desain Baru";
            }
            modal.classList.remove('hidden');
            document.getElementById('upload-area').focus();
        }

        window.closeFormModal = function() { document.getElementById('form-modal').classList.add('hidden'); }
        window.editItem = function(id) { openFormModal(true, id); }

        // --- FAQ FORM ---
        window.openFaqModal = function(isEdit = false, id = null) {
            const modal = document.getElementById('faq-modal');
            const title = document.getElementById('faq-modal-title');
            
            document.getElementById('faq-id').value = '';
            document.getElementById('faq-question').value = '';
            document.getElementById('faq-answer').value = '';

            if (isEdit && id) {
                title.innerText = "Edit FAQ";
                const item = window.faqData.find(f => f.id === id);
                if (item) {
                    document.getElementById('faq-id').value = item.id;
                    document.getElementById('faq-question').value = item.q;
                    document.getElementById('faq-answer').value = item.a;
                }
            } else {
                title.innerText = "Tambah FAQ";
            }
            modal.classList.remove('hidden');
        }

        window.closeFaqModal = function() { document.getElementById('faq-modal').classList.add('hidden'); }
        window.editFaq = function(id) { openFaqModal(true, id); }

        // --- IMAGE & RESIZE LOGIC ---
        window.previewImage = function(input) {
            if (input.files && input.files[0]) {
                processImage(input.files[0]);
            }
        }

        document.addEventListener('paste', function(event) {
            const formModal = document.getElementById('form-modal');
            if (formModal.classList.contains('hidden')) return;

            const items = (event.clipboardData || event.originalEvent.clipboardData).items;
            for (let index in items) {
                const item = items[index];
                if (item.kind === 'file' && item.type.startsWith('image/')) {
                    processImage(item.getAsFile());
                }
            }
        });

        function processImage(file) {
            const reader = new FileReader();
            reader.onload = function(event) {
                const img = new Image();
                img.onload = function() {
                    const canvas = document.createElement('canvas');
                    const MAX_WIDTH = 600; 
                    const scaleSize = MAX_WIDTH / img.width;
                    canvas.width = MAX_WIDTH;
                    canvas.height = img.height * scaleSize;

                    const ctx = canvas.getContext("2d");
                    ctx.drawImage(img, 0, 0, canvas.width, canvas.height);

                    const dataUrl = canvas.toDataURL("image/jpeg", 0.7);
                    
                    const preview = document.getElementById('image-preview');
                    preview.src = dataUrl;
                    preview.classList.remove('hidden');
                    document.getElementById('upload-placeholder').classList.add('hidden');
                    window.tempImageBase64 = dataUrl;
                    Swal.fire({ icon: 'success', title: 'Gambar siap!', toast: true, position: 'top-end', showConfirmButton: false, timer: 1000 });
                }
                img.src = event.target.result;
            }
            reader.readAsDataURL(file);
        }

        // --- COVER & MUSIC ---
        const coverScreen = document.getElementById('cover-screen');
        const audio = document.getElementById('bg-audio');
        const musicBtn = document.getElementById('music-btn');
        const musicIcon = musicBtn.querySelector('i');
        let isPlaying = false;

        window.openCatalog = function() {
            audio.play().then(() => {
                isPlaying = true;
                musicBtn.classList.add('music-rotating');
            }).catch(error => {
                isPlaying = false;
                musicIcon.classList.remove('fa-music');
                musicIcon.classList.add('fa-volume-mute');
                musicBtn.classList.remove('music-rotating');
            });
            coverScreen.classList.add('slide-up');
            musicBtn.classList.remove('hidden');
            // adminBtn.classList.remove('hidden'); // Removed, handled by navbar
            document.body.style.overflow = 'auto';
        }

        window.toggleMusic = function() {
            if (isPlaying) {
                audio.pause();
                isPlaying = false;
                musicIcon.classList.remove('fa-music');
                musicIcon.classList.add('fa-volume-mute');
                musicBtn.classList.remove('music-rotating');
            } else {
                audio.play();
                isPlaying = true;
                musicIcon.classList.remove('fa-volume-mute');
                musicIcon.classList.add('fa-music');
                musicBtn.classList.add('music-rotating');
            }
        }

        // --- ANIMATIONS ---
        const starsContainer = document.getElementById('stars-container');
        for (let i = 0; i < 50; i++) {
            const star = document.createElement('div');
            star.classList.add('star');
            star.style.left = `${Math.random() * 100}%`;
            star.style.top = `${Math.random() * 100}%`;
            const size = Math.random() * 3 + 1;
            star.style.width = `${size}px`;
            star.style.height = `${size}px`;
            star.style.setProperty('--duration', `${Math.random() * 3 + 2}s`);
            star.style.setProperty('--opacity', Math.random());
            starsContainer.appendChild(star);
        }

        const canvas = document.getElementById('canvas-bg');
        const ctx = canvas.getContext('2d');
        let width, height, particles = [];
        function resize() { width = canvas.width = window.innerWidth; height = canvas.height = window.innerHeight; }
        
        class Particle {
            constructor() { this.reset(); }
            reset() {
                this.x = Math.random() * width; this.y = Math.random() * height;
                this.vx = (Math.random() - 0.5) * 0.2; this.vy = (Math.random() - 0.5) * 0.2;
                this.size = Math.random() * 1.5 + 0.5; this.alpha = Math.random() * 0.5 + 0.2;
                const colors = ['34, 211, 238', '56, 189, 248', '14, 165, 233'];
                this.color = colors[Math.floor(Math.random() * colors.length)];
            }
            update() {
                this.x += this.vx; this.y += this.vy;
                if (this.x < 0 || this.x > width || this.y < 0 || this.y > height) this.reset();
            }
            draw() {
                ctx.fillStyle = `rgba(${this.color}, ${this.alpha})`;
                ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill();
            }
        }
        function initParticles() { particles = []; for(let i=0; i<80; i++) particles.push(new Particle()); }
        function animateParticles() {
            ctx.clearRect(0, 0, width, height);
            particles.forEach((p, i) => {
                p.update(); p.draw();
                for(let j=i+1; j<particles.length; j++) {
                    const dx = p.x - particles[j].x, dy = p.y - particles[j].y;
                    if(Math.sqrt(dx*dx + dy*dy) < 100) {
                        ctx.strokeStyle = `rgba(${p.color}, ${0.1 * (1 - Math.sqrt(dx*dx + dy*dy)/100)})`;
                        ctx.lineWidth = 0.5; ctx.beginPath(); ctx.moveTo(p.x, p.y); ctx.lineTo(particles[j].x, particles[j].y); ctx.stroke();
                    }
                }
            });
            requestAnimationFrame(animateParticles);
        }
        window.addEventListener('resize', resize); resize(); initParticles(); animateParticles();
        window.toggleMobileMenu = function() { document.getElementById('mobile-menu').classList.toggle('hidden'); }

    </script>
</body>
</html>

